From e78ebd7b2351ae6f2bfd861353b253d632ba4eaf Mon Sep 17 00:00:00 2001
From: tstegema <tstegema@90b65887-3827-0410-9a23-83215b262276>
Date: Mon, 27 Jul 2020 19:36:30 +0000
Subject: [PATCH 1024/1076] MANTIS 0055464 new payment schema file V1.1

CUSS.PAYMENT.XSD matches CUSS payment schema V1.0 and V1.1

git-svn-id: svn://localhost/SelfServiceCommon/trunk@1588 90b65887-3827-0410-9a23-83215b262276
---
 .../Massai/idl/Cuss/CUSS.PAYMENT.XSD          | 1297 ++++++++++-------
 1 file changed, 750 insertions(+), 547 deletions(-)

diff --git a/SelfServiceCommon/Massai/idl/Cuss/CUSS.PAYMENT.XSD b/SelfServiceCommon/Massai/idl/Cuss/CUSS.PAYMENT.XSD
index 9f633c20..c501a4a2 100644
--- a/SelfServiceCommon/Massai/idl/Cuss/CUSS.PAYMENT.XSD
+++ b/SelfServiceCommon/Massai/idl/Cuss/CUSS.PAYMENT.XSD
@@ -1,591 +1,794 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
-    <xs:simpleType name="currency-code-type">
-        <xs:annotation>
-            <xs:documentation>ISO 4217 (3-character alpha) currency code</xs:documentation>
-        </xs:annotation>
-        <xs:restriction base="xs:string">
-            <xs:length value="3"/>
-        </xs:restriction>
-    </xs:simpleType>
-    <xs:simpleType name="ds-types-type">
-        <xs:annotation>
-            <xs:documentation>DS type(s) string</xs:documentation>
-        </xs:annotation>
-        <xs:restriction base="xs:string">
-            <xs:enumeration value="DS_TYPES_EPAYMENT"/>
-        </xs:restriction>
-    </xs:simpleType>
-    <xs:simpleType name="transaction-document-type">
-        <xs:annotation>
-            <xs:documentation>Transaction document type</xs:documentation>
-        </xs:annotation>
-        <xs:restriction base="xs:string">
-            <xs:enumeration value="none"/>
-            <xs:enumeration value="request"/>
-            <xs:enumeration value="response"/>
-            <xs:enumeration value="ack"/>
-        </xs:restriction>
-    </xs:simpleType>
-    <xs:element name="approval-code" type="xs:string">
-        <xs:annotation>
-            <xs:documentation>Acquirer or issuer provided approval (authorization) code</xs:documentation>
-        </xs:annotation>
-    </xs:element>
-    <xs:element name="approved-amounts">
-        <xs:annotation>
-            <xs:documentation>Authorized financial elements (mandatory in response, not required in request)</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
+  <xs:complexType name="EPaymentCharacteristics">
+    <xs:annotation>
+      <xs:documentation>EPayment component characteristics.</xs:documentation>
+    </xs:annotation>
+    <xs:sequence>
+      <xs:element ref="feature-list" minOccurs="0"/>
+      <xs:element ref="card-brand-list" minOccurs="0"/>
+      <xs:element ref="media-type-list" minOccurs="0"/>
+      <xs:element ref="currency-code-list" minOccurs="0"/>
+    </xs:sequence>
+  </xs:complexType>
+  <xs:simpleType name="characteristics-document-type">
+    <xs:annotation>
+      <xs:documentation>Characteristics document type.</xs:documentation>
+    </xs:annotation>
+    <xs:restriction base="xs:string">
+      <xs:enumeration value="none"/>
+      <xs:enumeration value="request"/>
+      <xs:enumeration value="response"/>
+    </xs:restriction>
+  </xs:simpleType>
+  <xs:simpleType name="cu-msg-schema-version-type">
+    <xs:annotation>
+      <xs:documentation>Common use message schema version.
+Version format: 2-digit-major.2-digit-minor.4-digit-increment.
+New major number extends or changes schema and may not guarantee backward compatibility (may break existing implementations).
+New minor number extends schema and guarantees backward compatibility (does not break existing implementations).
+New increment number implements no functional changes (e.g. documentation changes, additional enumerated values, etc.).
+</xs:documentation>
+    </xs:annotation>
+    <xs:restriction base="xs:string">
+      <xs:minLength value="3"/>
+      <xs:maxLength value="10"/>
+      <xs:pattern value="[0-9]{1,2}\.[0-9]{1,2}(\.[0-9]{1,4}){0,1}"/>
+    </xs:restriction>
+  </xs:simpleType>
+  <xs:simpleType name="currency-code-type">
+    <xs:annotation>
+      <xs:documentation>ISO 4217 (3-character alpha) currency code.</xs:documentation>
+    </xs:annotation>
+    <xs:restriction base="xs:string">
+      <xs:length value="3"/>
+    </xs:restriction>
+  </xs:simpleType>
+  <xs:simpleType name="ds-types-type">
+    <xs:annotation>
+      <xs:documentation>DS type(s) string.</xs:documentation>
+    </xs:annotation>
+    <xs:restriction base="xs:string">
+      <xs:enumeration value="DS_TYPES_EPAYMENT"/>
+    </xs:restriction>
+  </xs:simpleType>
+  <xs:simpleType name="operation-document-type">
+    <xs:annotation>
+      <xs:documentation>Operation document type.</xs:documentation>
+    </xs:annotation>
+    <xs:restriction base="xs:string">
+      <xs:enumeration value="none"/>
+      <xs:enumeration value="request"/>
+      <xs:enumeration value="response"/>
+    </xs:restriction>
+  </xs:simpleType>
+  <xs:simpleType name="transaction-document-type">
+    <xs:annotation>
+      <xs:documentation>Transaction document type.</xs:documentation>
+    </xs:annotation>
+    <xs:restriction base="xs:string">
+      <xs:enumeration value="none"/>
+      <xs:enumeration value="request"/>
+      <xs:enumeration value="response"/>
+      <xs:enumeration value="ack"/>
+    </xs:restriction>
+  </xs:simpleType>
+  <xs:element name="approval-code" type="xs:string">
+    <xs:annotation>
+      <xs:documentation>Acquirer or issuer provided approval (authorization) code.</xs:documentation>
+    </xs:annotation>
+  </xs:element>
+  <xs:element name="approved-amounts">
+    <xs:annotation>
+      <xs:documentation>Authorized financial elements (mandatory in response, not required in request).</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element ref="base-amount"/>
+      </xs:sequence>
+      <xs:attribute name="currency-code" type="currency-code-type" use="required"/>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="authorization-amounts">
+    <xs:annotation>
+      <xs:documentation>Requested or authorized financial elements.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element name="requested-amounts" minOccurs="0">
+          <xs:annotation>
+            <xs:documentation>Requested financial elements (mandatory in request, required in response only where authorized amount is in a different currency from that requested).</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
             <xs:sequence>
-                <xs:element ref="base-amount"/>
+              <xs:element ref="base-amount"/>
             </xs:sequence>
             <xs:attribute name="currency-code" type="currency-code-type" use="required"/>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="authorization-amounts">
-        <xs:annotation>
-            <xs:documentation>Requested or authorized financial elements</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
-            <xs:sequence>
-                <xs:element name="requested-amounts" minOccurs="0">
-                    <xs:annotation>
-                        <xs:documentation>Requested financial elements (mandatory in request, required in response only where authorized amount is in a different currency from that requested)</xs:documentation>
-                    </xs:annotation>
-                    <xs:complexType>
+          </xs:complexType>
+        </xs:element>
+        <xs:element ref="approved-amounts" minOccurs="0"/>
+      </xs:sequence>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="base-amount" type="xs:decimal">
+    <xs:annotation>
+      <xs:documentation>Requested or authorized amount in units.subunits (arithmetic major units) format.</xs:documentation>
+    </xs:annotation>
+  </xs:element>
+  <xs:element name="card-brand">
+    <xs:annotation>
+      <xs:documentation>A freeform string identifying the card brand or scheme that can be accepted for payment. It can be a specific application ID, as defined at https://eftlab.com.au/index.php/site-map/knowledge-base/211-emv-aid-rid-pix, or a top-level scheme name from the set { "amex", "cart-blanche", "discover", "jcb", "maestro", "mastercard", "switch", "visa" }.</xs:documentation>
+    </xs:annotation>
+    <xs:simpleType>
+      <xs:restriction base="xs:string">
+        <xs:enumeration value="amex"/>
+        <xs:enumeration value="cart-blanche"/>
+        <xs:enumeration value="discover"/>
+        <xs:enumeration value="jcb"/>
+        <xs:enumeration value="maestro"/>
+        <xs:enumeration value="mastercard"/>
+        <xs:enumeration value="switch"/>
+        <xs:enumeration value="visa"/>
+      </xs:restriction>
+    </xs:simpleType>
+  </xs:element>
+  <xs:element name="card-brand-list">
+    <xs:annotation>
+      <xs:documentation>Payment system supported, component-configured or application-requested card brand list.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element ref="card-brand" maxOccurs="unbounded"/>
+      </xs:sequence>
+      <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="cu-msg">
+    <xs:annotation>
+      <xs:documentation>Common use message document root element.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:choice>
+        <xs:element name="characteristics">
+          <xs:annotation>
+            <xs:documentation>Component characteristics.</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
+            <xs:choice>
+              <xs:element name="characteristics-request" minOccurs="0">
+                <xs:annotation>
+                  <xs:documentation>This redundant element is included for document consistency, documentation and as a placeholder for future functionality only. A characteristics request does not have to explicitly include it.</xs:documentation>
+                </xs:annotation>
+              </xs:element>
+              <xs:element name="characteristics-response">
+                <xs:complexType>
+                  <xs:sequence>
+                    <xs:element name="cu-msg-schema-version-list">
+                      <xs:annotation>
+                        <xs:documentation>Supported common use message schema version list. Each supported version must be explicitly listed.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
                         <xs:sequence>
-                            <xs:element ref="base-amount"/>
+                          <xs:element name="cu-msg-schema-version" type="cu-msg-schema-version-type" maxOccurs="unbounded"/>
                         </xs:sequence>
-                        <xs:attribute name="currency-code" type="currency-code-type" use="required"/>
-                    </xs:complexType>
-                </xs:element>
-                <xs:element ref="approved-amounts" minOccurs="0"/>
-            </xs:sequence>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="base-amount" type="xs:decimal">
-        <xs:annotation>
-            <xs:documentation>Requested or authorized amount in units.subunits (arithmetic major units) format</xs:documentation>
-        </xs:annotation>
-    </xs:element>
-    <xs:element name="card-brand">
-        <xs:annotation>
-            <xs:documentation>Card brand identifier</xs:documentation>
-        </xs:annotation>
-        <xs:simpleType>
-            <xs:restriction base="xs:string">
-                <xs:enumeration value="amex"/>
-                <xs:enumeration value="cart-blanche"/>
-                <xs:enumeration value="discover"/>
-                <xs:enumeration value="jcb"/>
-                <xs:enumeration value="maestro"/>
-                <xs:enumeration value="mastercard"/>
-                <xs:enumeration value="switch"/>
-                <xs:enumeration value="visa"/>
-            </xs:restriction>
-        </xs:simpleType>
-    </xs:element>
-    <xs:element name="card-brand-list">
-        <xs:annotation>
-            <xs:documentation>Component-configured or application-requested card brand list</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
-            <xs:sequence>
-                <xs:element ref="card-brand" maxOccurs="unbounded"/>
-            </xs:sequence>
-            <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="cu-msg">
-        <xs:annotation>
-            <xs:documentation>Common use message document root element</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
-            <xs:choice>
-                <xs:element name="characteristics">
-                    <xs:annotation>
-                        <xs:documentation>Component characteristics</xs:documentation>
-                    </xs:annotation>
-                    <xs:complexType>
-                        <xs:choice>
-                            <xs:element name="epayment">
-                                <xs:annotation>
-                                    <xs:documentation>EPayment component characteristics</xs:documentation>
-                                </xs:annotation>
-                                <xs:complexType>
-                                    <xs:sequence>
-                                        <xs:element ref="feature-list" minOccurs="0"/>
-                                        <xs:element ref="card-brand-list" minOccurs="0"/>
-                                        <xs:element ref="media-type-list" minOccurs="0"/>
-                                        <xs:element ref="currency-code-list" minOccurs="0"/>
-                                    </xs:sequence>
-                                </xs:complexType>
-                            </xs:element>
-                        </xs:choice>
-                        <xs:attribute name="ds-types" type="ds-types-type" use="required"/>
-                    </xs:complexType>
-                </xs:element>
-                <xs:element ref="epayment-msg"/>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="epayment" type="EPaymentCharacteristics">
+                      <xs:annotation>
+                        <xs:documentation>EPayment component characteristics.</xs:documentation>
+                      </xs:annotation>
+                    </xs:element>
+                  </xs:sequence>
+                  <xs:attribute name="ds-types" type="ds-types-type" use="required"/>
+                </xs:complexType>
+              </xs:element>
+              <xs:element name="epayment" type="EPaymentCharacteristics">
+                <xs:annotation>
+                  <xs:documentation>EPayment component characteristics</xs:documentation>
+                </xs:annotation>
+              </xs:element>
             </xs:choice>
-            <xs:attribute name="cu-msg-schema-version" use="optional" default="1.00">
-                <xs:simpleType>
-                    <xs:restriction base="xs:string"/>
-                </xs:simpleType>
+            <xs:attribute name="ds-types" type="ds-types-type" use="optional"/>
+            <xs:attribute name="characteristics-document-type" type="characteristics-document-type" use="optional"/>
+            <xs:attribute name="characteristics-document-return-type" type="characteristics-document-type" use="optional"/>
+          </xs:complexType>
+        </xs:element>
+        <xs:element ref="epayment-msg"/>
+        <xs:element name="error-reponse">
+          <xs:annotation>
+            <xs:documentation>Document cannot be parsed or validated, or is unexpected, out-of-sequence or out-of-context for the current component state.</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
+            <xs:attribute name="error-document" type="xs:string" use="required">
+              <xs:annotation>
+                <xs:documentation>Echo of unreadable or illogical document in base64 format.</xs:documentation>
+              </xs:annotation>
             </xs:attribute>
-            <xs:attribute name="cu-msg-document-type" use="required">
-                <xs:simpleType>
-                    <xs:restriction base="xs:string">
-                        <xs:enumeration value="characteristics"/>
-                        <xs:enumeration value="epayment-msg"/>
-                    </xs:restriction>
-                </xs:simpleType>
+            <xs:attribute name="error-reason" use="required">
+              <xs:annotation>
+                <xs:documentation>Human-readable reason that the document could not be processed by the component.</xs:documentation>
+              </xs:annotation>
+              <xs:simpleType>
+                <xs:restriction base="xs:string">
+                  <xs:enumeration value="data-error"/>
+                  <xs:enumeration value="format-error"/>
+                  <xs:enumeration value="illogical"/>
+                </xs:restriction>
+              </xs:simpleType>
             </xs:attribute>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="currency-code" type="currency-code-type">
+          </xs:complexType>
+        </xs:element>
+      </xs:choice>
+      <xs:attribute name="cu-msg-schema-version" use="optional">
         <xs:annotation>
-            <xs:documentation>ISO 4217 (3-character alpha) currency code</xs:documentation>
+          <xs:documentation>Version format: 2-digit-major.2-digit-minor.4-digit-increment.
+New major number extends or changes schema and may not guarantee backward compatibility (may break existing implementations).
+New minor number extends schema and guarantees backward compatibility (does not break existing implementations).
+New increment number implements no functional changes (e.g. documentation changes, additional enumerated values, etc.).
+</xs:documentation>
         </xs:annotation>
-    </xs:element>
-    <xs:element name="currency-code-list">
+        <xs:simpleType>
+          <xs:restriction base="cu-msg-schema-version-type"/>
+        </xs:simpleType>
+      </xs:attribute>
+      <xs:attribute name="cu-msg-session-id" use="optional">
         <xs:annotation>
-            <xs:documentation>Component-configured or application-requested payment currency code list</xs:documentation>
+          <xs:documentation>An arbitrary tracking value that the CUSS application chooses and assigns when starting a payment transaction. The CUSS platform must then echo this requested value in all subsequent responses or asynchronous event messages related to that payment transaction. This correlation permits a CUSS application to match and associate request and response messages and is critical for the case where an application has more than one multi-step payment transaction (manual ack, or auth/hold/commit) ongoing concurrently.</xs:documentation>
         </xs:annotation>
-        <xs:complexType>
+        <xs:simpleType>
+          <xs:restriction base="xs:string">
+            <xs:minLength value="1"/>
+          </xs:restriction>
+        </xs:simpleType>
+      </xs:attribute>
+      <xs:attribute name="cu-msg-document-type" use="required">
+        <xs:simpleType>
+          <xs:restriction base="xs:string">
+            <xs:enumeration value="characteristics"/>
+            <xs:enumeration value="epayment-msg"/>
+            <xs:enumeration value="error-response"/>
+          </xs:restriction>
+        </xs:simpleType>
+      </xs:attribute>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="currency-code" type="currency-code-type">
+    <xs:annotation>
+      <xs:documentation>ISO 4217 (3-character alpha) currency code.</xs:documentation>
+    </xs:annotation>
+  </xs:element>
+  <xs:element name="currency-code-list">
+    <xs:annotation>
+      <xs:documentation>Payment system supported, component-configured or application-requested payment currency code list.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element ref="currency-code" maxOccurs="unbounded"/>
+      </xs:sequence>
+      <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="epayment-msg">
+    <xs:annotation>
+      <xs:documentation>Common use payment component request/response message.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:choice>
+        <xs:element name="setup">
+          <xs:annotation>
+            <xs:documentation>Execution context setup.</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
             <xs:sequence>
-                <xs:element ref="currency-code" maxOccurs="unbounded"/>
+              <xs:element ref="merchant-id" minOccurs="0"/>
+              <xs:element ref="feature-list" minOccurs="0"/>
+              <xs:element ref="card-brand-list" minOccurs="0"/>
+              <xs:element ref="media-type-list" minOccurs="0"/>
+              <xs:element ref="currency-code-list" minOccurs="0"/>
             </xs:sequence>
-            <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="epayment-msg">
-        <xs:annotation>
-            <xs:documentation>Common use payment component request/response message</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
+            <xs:attribute name="ds-types" type="ds-types-type" use="optional"/>
+          </xs:complexType>
+        </xs:element>
+        <xs:element name="transaction">
+          <xs:annotation>
+            <xs:documentation>Financial transaction.</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
             <xs:choice>
-                <xs:element name="setup">
-                    <xs:annotation>
-                        <xs:documentation>Execution context setup</xs:documentation>
-                    </xs:annotation>
-                    <xs:complexType>
+              <xs:element name="transaction-request">
+                <xs:annotation>
+                  <xs:documentation>Financial request from common use application to payment component.</xs:documentation>
+                </xs:annotation>
+                <xs:complexType>
+                  <xs:sequence>
+                    <xs:element name="environment" minOccurs="0">
+                      <xs:annotation>
+                        <xs:documentation>Optional common use terminal/application operational parameters, allowing the CUSS application to indicate more specific values related to the payment transaction for tracking and reconciliation purposes. If the CUSS application does not supply any values, the CUSS platform may provide appropriate values to the payment subsystem depending on what data fields that subsystem requires.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
                         <xs:sequence>
-                            <xs:element ref="merchant-id" minOccurs="0"/>
-                            <xs:element ref="feature-list" minOccurs="0"/>
-                            <xs:element ref="card-brand-list" minOccurs="0"/>
-                            <xs:element ref="media-type-list" minOccurs="0"/>
-                            <xs:element ref="currency-code-list" minOccurs="0"/>
+                          <xs:element ref="merchant-id" minOccurs="0"/>
+                          <xs:element name="location" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Common use kiosk/terminal/station identifier. May be reported on cardholder or reconciliation statements for informational purposes.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="cashier" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Agent/cashier (or pseudo-cashier) identifier. May be reported on cardholder or reconciliation statements for informational purposes. Some payment solutions may require this, but the component will synthesize a value if one is required but none is explicitly provided.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="order-reference" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Airline/merchant order, receipt or ticket reference number. May be reported on cardholder or reconciliation statements for informational purposes.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
                         </xs:sequence>
-                        <xs:attribute name="ds-types" type="ds-types-type" use="optional"/>
-                    </xs:complexType>
-                </xs:element>
-                <xs:element name="transaction">
-                    <xs:annotation>
-                        <xs:documentation>Financial transaction</xs:documentation>
-                    </xs:annotation>
-                    <xs:complexType>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="pre-auth" minOccurs="0">
+                      <xs:annotation>
+                        <xs:documentation>Details of previously acquired pre-authorization being finalized by this post-authorization.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
+                        <xs:sequence>
+                          <xs:element ref="transaction-reference" minOccurs="0"/>
+                          <xs:element ref="approval-code" minOccurs="0"/>
+                          <xs:element ref="approved-amounts"/>
+                        </xs:sequence>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="account" minOccurs="0">
+                      <xs:annotation>
+                        <xs:documentation>Optional common use terminal/application-acquired account details.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
                         <xs:choice>
-                            <xs:element name="transaction-request">
-                                <xs:annotation>
-                                    <xs:documentation>Financial request from common use application to payment component</xs:documentation>
-                                </xs:annotation>
-                                <xs:complexType>
-                                    <xs:sequence>
-                                        <xs:element name="environment" minOccurs="0">
-                                            <xs:annotation>
-                                                <xs:documentation>Optional common use terminal/application operational parameters</xs:documentation>
-                                            </xs:annotation>
-                                            <xs:complexType>
-                                                <xs:sequence>
-                                                    <xs:element ref="merchant-id" minOccurs="0"/>
-                                                    <xs:element name="location" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Common use kiosk/terminal/station identifier</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="cashier" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Agent/cashier (or pseudo-cashier) identifier</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="order-reference" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Airline/merchant order, receipt or ticket reference number</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                </xs:sequence>
-                                            </xs:complexType>
-                                        </xs:element>
-                                        <xs:element name="pre-auth" minOccurs="0">
-                                            <xs:annotation>
-                                                <xs:documentation>Details of previously acquired pre-auth being finalized by this post-auth</xs:documentation>
-                                            </xs:annotation>
-                                            <xs:complexType>
-                                                <xs:sequence>
-                                                    <xs:element ref="transaction-reference" minOccurs="0"/>
-                                                    <xs:element ref="approval-code" minOccurs="0"/>
-                                                    <xs:element ref="approved-amounts"/>
-                                                </xs:sequence>
-                                            </xs:complexType>
-                                        </xs:element>
-                                        <xs:element name="account" minOccurs="0">
-                                            <xs:annotation>
-                                                <xs:documentation>Optional common use terminal/application-acquired account details</xs:documentation>
-                                            </xs:annotation>
-                                            <xs:complexType>
-                                                <xs:choice>
-                                                    <xs:element name="manual">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Manually-acquired account details (or the relevant elements from an electronic acquisition)</xs:documentation>
-                                                        </xs:annotation>
-                                                        <xs:complexType>
-                                                            <xs:sequence>
-                                                                <xs:element name="pan">
-                                                                    <xs:simpleType>
-                                                                        <xs:restriction base="xs:string">
-                                                                            <xs:minLength value="12"/>
-                                                                            <xs:maxLength value="19"/>
-                                                                        </xs:restriction>
-                                                                    </xs:simpleType>
-                                                                </xs:element>
-                                                                <xs:element name="expiration">
-                                                                    <xs:annotation>
-                                                                        <xs:documentation>MMYY format</xs:documentation>
-                                                                    </xs:annotation>
-                                                                    <xs:simpleType>
-                                                                        <xs:restriction base="xs:string">
-                                                                            <xs:length value="4"/>
-                                                                        </xs:restriction>
-                                                                    </xs:simpleType>
-                                                                </xs:element>
-                                                            </xs:sequence>
-                                                        </xs:complexType>
-                                                    </xs:element>
-                                                    <xs:element name="swipe">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Electronically-acquired account details</xs:documentation>
-                                                        </xs:annotation>
-                                                        <xs:complexType>
-                                                            <xs:sequence>
-                                                                <xs:element name="track" maxOccurs="3">
-                                                                    <xs:complexType>
-                                                                        <xs:simpleContent>
-                                                                            <xs:extension base="xs:string">
-                                                                                <xs:attribute name="track-number" use="required">
-                                                                                    <xs:simpleType>
-                                                                                        <xs:restriction base="xs:integer">
-                                                                                            <xs:minInclusive value="1"/>
-                                                                                            <xs:maxInclusive value="3"/>
-                                                                                        </xs:restriction>
-                                                                                    </xs:simpleType>
-                                                                                </xs:attribute>
-                                                                            </xs:extension>
-                                                                        </xs:simpleContent>
-                                                                    </xs:complexType>
-                                                                </xs:element>
-                                                            </xs:sequence>
-                                                        </xs:complexType>
-                                                    </xs:element>
-                                                </xs:choice>
-                                                <xs:attribute name="account-type" use="required">
-                                                    <xs:annotation>
-                                                        <xs:documentation>Account data acquisition type (or pseudo-acquisition type; some applications may present the account data to the payment component as having been manually acquired even if they were acquired electronically)</xs:documentation>
-                                                    </xs:annotation>
-                                                    <xs:simpleType>
-                                                        <xs:restriction base="xs:string">
-                                                            <xs:enumeration value="manual"/>
-                                                            <xs:enumeration value="swipe"/>
-                                                        </xs:restriction>
-                                                    </xs:simpleType>
-                                                </xs:attribute>
-                                            </xs:complexType>
-                                        </xs:element>
-                                        <xs:element name="itinerary" minOccurs="0">
-                                            <xs:annotation>
-                                                <xs:documentation>Travel itinerary details</xs:documentation>
-                                            </xs:annotation>
-                                            <xs:complexType>
-                                                <xs:sequence>
-                                                    <xs:element name="name" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Passenger name</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="pnr" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Passenger name record</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="date" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Transaction (flight) date</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="flight-number" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Airline identifier and flight number</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="departure-city" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Departure city code</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="arrival-city" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Arrival city code</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                </xs:sequence>
-                                            </xs:complexType>
-                                        </xs:element>
-                                        <xs:element name="billing-description" type="xs:string" minOccurs="0">
-                                            <xs:annotation>
-                                                <xs:documentation>Descriptive billing information</xs:documentation>
-                                            </xs:annotation>
-                                        </xs:element>
-                                        <xs:element ref="gp-parameter-list" minOccurs="0"/>
-                                        <xs:element ref="authorization-amounts"/>
-                                    </xs:sequence>
-                                    <xs:attribute name="language" use="optional">
-                                        <xs:annotation>
-                                            <xs:documentation>ISO 639-1 (2-character) code for the interface language to be used at the payment device and in transaction status messages</xs:documentation>
-                                        </xs:annotation>
-                                        <xs:simpleType>
-                                            <xs:restriction base="xs:string">
-                                                <xs:length value="2"/>
-                                            </xs:restriction>
-                                        </xs:simpleType>
-                                    </xs:attribute>
-                                </xs:complexType>
-                            </xs:element>
-                            <xs:element name="transaction-response">
-                                <xs:annotation>
-                                    <xs:documentation>Financial request response from payment component to common use application</xs:documentation>
-                                </xs:annotation>
-                                <xs:complexType>
-                                    <xs:choice>
-                                        <xs:element name="approval">
-                                            <xs:complexType>
-                                                <xs:sequence>
-                                                    <xs:element ref="transaction-reference" minOccurs="0"/>
-                                                    <xs:element ref="media-type" minOccurs="0"/>
-                                                    <xs:element name="approval-type" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Type of approval</xs:documentation>
-                                                        </xs:annotation>
-                                                        <xs:simpleType>
-                                                            <xs:restriction base="xs:string">
-                                                                <xs:enumeration value="pin"/>
-                                                                <xs:enumeration value="signature"/>
-                                                            </xs:restriction>
-                                                        </xs:simpleType>
-                                                    </xs:element>
-                                                    <xs:element name="card-brand" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Card brand name</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element name="card-pan" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Secured card primary account number (masked or truncated)</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                    <xs:element ref="approval-code" minOccurs="0"/>
-                                                    <xs:element ref="gp-parameter-list" minOccurs="0"/>
-                                                    <xs:element ref="authorization-amounts"/>
-                                                    <xs:element name="receipt-data" type="xs:string" minOccurs="0">
-                                                        <xs:annotation>
-                                                            <xs:documentation>Acquirer-provided pre-formatted receipt data</xs:documentation>
-                                                        </xs:annotation>
-                                                    </xs:element>
-                                                </xs:sequence>
-                                            </xs:complexType>
-                                        </xs:element>
-                                        <xs:element name="non-approval">
-                                            <xs:annotation>
-                                                <xs:documentation>Decline, referral or failure details</xs:documentation>
-                                            </xs:annotation>
-                                            <xs:complexType>
-                                                <xs:simpleContent>
-                                                    <xs:extension base="xs:string">
-                                                        <xs:attribute name="non-approval-reason-code" type="xs:integer" use="optional"/>
-                                                        <xs:attribute name="referral" type="xs:boolean" use="optional"/>
-                                                    </xs:extension>
-                                                </xs:simpleContent>
-                                            </xs:complexType>
-                                        </xs:element>
-                                        <xs:element name="transaction-status">
-                                            <xs:annotation>
-                                                <xs:documentation>Free-form status indication and/or display text</xs:documentation>
-                                            </xs:annotation>
-                                            <xs:complexType>
-                                                <xs:simpleContent>
-                                                    <xs:extension base="xs:string">
-                                                        <xs:attribute name="transaction-status-id" use="optional">
-                                                            <xs:simpleType>
-                                                                <xs:restriction base="xs:string">
-                                                                    <xs:enumeration value="amount-approval"/>
-                                                                    <xs:enumeration value="application-selection"/>
-                                                                    <xs:enumeration value="card-insertion"/>
-                                                                    <xs:enumeration value="card-removal"/>
-                                                                    <xs:enumeration value="cashback-entry"/>
-                                                                    <xs:enumeration value="pin-entry"/>
-                                                                    <xs:enumeration value="processing"/>
-                                                                </xs:restriction>
-                                                            </xs:simpleType>
-                                                        </xs:attribute>
-                                                    </xs:extension>
-                                                </xs:simpleContent>
-                                            </xs:complexType>
-                                        </xs:element>
-                                    </xs:choice>
-                                    <xs:attribute name="response-type" use="required">
-                                        <xs:simpleType>
-                                            <xs:restriction base="xs:string">
-                                                <xs:enumeration value="approval"/>
-                                                <xs:enumeration value="decline"/>
-                                                <xs:enumeration value="failure"/>
-                                                <xs:enumeration value="status"/>
+                          <xs:element name="manual">
+                            <xs:annotation>
+                              <xs:documentation>Manually-acquired account details (or the relevant elements from an electronic acquisition).</xs:documentation>
+                            </xs:annotation>
+                            <xs:complexType>
+                              <xs:sequence>
+                                <xs:element name="pan">
+                                  <xs:simpleType>
+                                    <xs:restriction base="xs:string">
+                                      <xs:minLength value="12"/>
+                                      <xs:maxLength value="19"/>
+                                    </xs:restriction>
+                                  </xs:simpleType>
+                                </xs:element>
+                                <xs:element name="expiration">
+                                  <xs:annotation>
+                                    <xs:documentation>MMYY format.</xs:documentation>
+                                  </xs:annotation>
+                                  <xs:simpleType>
+                                    <xs:restriction base="xs:string">
+                                      <xs:length value="4"/>
+                                    </xs:restriction>
+                                  </xs:simpleType>
+                                </xs:element>
+                              </xs:sequence>
+                            </xs:complexType>
+                          </xs:element>
+                          <xs:element name="swipe">
+                            <xs:annotation>
+                              <xs:documentation>Electronically-acquired account details.</xs:documentation>
+                            </xs:annotation>
+                            <xs:complexType>
+                              <xs:sequence>
+                                <xs:element name="track" maxOccurs="3">
+                                  <xs:complexType>
+                                    <xs:simpleContent>
+                                      <xs:extension base="xs:string">
+                                        <xs:attribute name="track-number" use="required">
+                                          <xs:simpleType>
+                                            <xs:restriction base="xs:integer">
+                                              <xs:minInclusive value="1"/>
+                                              <xs:maxInclusive value="3"/>
                                             </xs:restriction>
-                                        </xs:simpleType>
-                                    </xs:attribute>
-                                </xs:complexType>
-                            </xs:element>
-                            <xs:element name="transaction-ack">
-                                <xs:annotation>
-                                    <xs:documentation>Confirmation (or rejection) of approved funds consumption</xs:documentation>
-                                </xs:annotation>
-                                <xs:complexType>
-                                    <xs:attribute name="consumed" type="xs:boolean" use="required"/>
-                                </xs:complexType>
-                            </xs:element>
+                                          </xs:simpleType>
+                                        </xs:attribute>
+                                      </xs:extension>
+                                    </xs:simpleContent>
+                                  </xs:complexType>
+                                </xs:element>
+                              </xs:sequence>
+                            </xs:complexType>
+                          </xs:element>
                         </xs:choice>
-                        <xs:attribute name="transaction-document-type" type="transaction-document-type" use="required"/>
-                        <xs:attribute name="transaction-document-return-type" type="transaction-document-type" use="optional">
+                        <xs:attribute name="account-type" use="required">
+                          <xs:annotation>
+                            <xs:documentation>Account data acquisition type (or pseudo-acquisition type; some applications may present the account data to the payment component as having been manually acquired even if they were acquired electronically).</xs:documentation>
+                          </xs:annotation>
+                          <xs:simpleType>
+                            <xs:restriction base="xs:string">
+                              <xs:enumeration value="manual"/>
+                              <xs:enumeration value="swipe"/>
+                            </xs:restriction>
+                          </xs:simpleType>
+                        </xs:attribute>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="itinerary" minOccurs="0">
+                      <xs:annotation>
+                        <xs:documentation>The information in the itinerary block is optional, and lets the CUSS application specific additional tracking and reconciliation data for the payment transaction, relating specifically to an airline transaction itinerary. The CUSS platform provider may mandate that this information be provided with all transactions. This requirement will be established during the negotiation and configuration phase of the initial deployment of payment capability for an airline. It is anticipated that the CUSS platform itself will not store or make use of this information. Instead, it will be forwarded to the payment solution for back-end reconciliation purposes.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
+                        <xs:sequence>
+                          <xs:element name="name" type="xs:string" minOccurs="0">
                             <xs:annotation>
-                                <xs:documentation>Advise to the recipient as to what type of transaction document is expected to be returned; for a response document, this attribute indicates whether the platform expects an acknowledgement document to be returned to commit (or discard) the transaction</xs:documentation>
+                              <xs:documentation>Passenger name.</xs:documentation>
                             </xs:annotation>
-                        </xs:attribute>
-                        <xs:attribute name="transaction-type" use="required">
+                          </xs:element>
+                          <xs:element name="pnr" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Passenger name record.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="date" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Transaction (flight) date.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="flight-number" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Airline identifier and flight number.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="departure-city" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Departure city code.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="arrival-city" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Arrival city code.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                        </xs:sequence>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="billing-description" type="xs:string" minOccurs="0">
+                      <xs:annotation>
+                        <xs:documentation>Descriptive billing information. This optional value lets the CUSS application suggest a value that will appear on the kiosk application user’s payment summary (monthly bill, etc.) as an extended description of the transaction. The value may or may not appear on the customer’s bill depending on the capabilities of the airport and customer’s banking systems. Long data may be truncated. 	The platform may also be used as an additional tracking mechanism for other systems such as aggregator and reconciliation infrastructure.</xs:documentation>
+                      </xs:annotation>
+                    </xs:element>
+                    <xs:element ref="gp-parameter-list" minOccurs="0"/>
+                    <xs:element ref="authorization-amounts" minOccurs="0"/>
+                  </xs:sequence>
+                  <xs:attribute name="language" use="optional">
+                    <xs:annotation>
+                      <xs:documentation>ISO 639-1 (2-character) code for the interface language to be used at the payment device and in transaction status messages. This is an optional value that lets the CUSS application suggest a language to use when performing the payment transaction. The payment subsystem could use this value to adjust prompts displayed on the payment terminal screen or the language on the preformatted receipt data. This value could be set in response to a prior language selection by the kiosk application user as part of the overall kiosk transaction. The payment system may override this setting once a language value is read from the card itself as part of the transaction.</xs:documentation>
+                    </xs:annotation>
+                    <xs:simpleType>
+                      <xs:restriction base="xs:string">
+                        <xs:length value="2"/>
+                      </xs:restriction>
+                    </xs:simpleType>
+                  </xs:attribute>
+                </xs:complexType>
+              </xs:element>
+              <xs:element name="transaction-response">
+                <xs:annotation>
+                  <xs:documentation>Financial request response from payment component to common use application.</xs:documentation>
+                </xs:annotation>
+                <xs:complexType>
+                  <xs:choice>
+                    <xs:element name="approval">
+                      <xs:annotation>
+                        <xs:documentation>Approval reference information. An application may use this information as it chooses. No sensitive payment information shall be provided in this element. Various data items, such as cryptogram, may be required by some application providers for proper payment processing and reconciliation.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
+                        <xs:sequence>
+                          <xs:element ref="transaction-reference" minOccurs="0"/>
+                          <xs:element ref="media-type" minOccurs="0"/>
+                          <xs:element name="approval-type" minOccurs="0">
                             <xs:annotation>
-                                <xs:documentation>Financial transaction type</xs:documentation>
+                              <xs:documentation>Type of approval.</xs:documentation>
                             </xs:annotation>
                             <xs:simpleType>
+                              <xs:restriction base="xs:string">
+                                <xs:enumeration value="none"/>
+                                <xs:enumeration value="pin"/>
+                                <xs:enumeration value="signature"/>
+                              </xs:restriction>
+                            </xs:simpleType>
+                          </xs:element>
+                          <xs:element name="signature-capture" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>For an approval that requires subsequent signature verification by the application, and where the component has electronic signature capture capability, the signature capture (PNG format) data in base64 representation.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="card-brand" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Card brand name.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element name="card-pan" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Secured (masked or truncated) card primary account number.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element ref="approval-code" minOccurs="0"/>
+                          <xs:element ref="gp-parameter-list" minOccurs="0"/>
+                          <xs:element ref="authorization-amounts"/>
+                          <xs:element ref="receipt-data" minOccurs="0" maxOccurs="unbounded"/>
+                        </xs:sequence>
+                        <xs:attribute name="cardholder-receipt-printed" type="xs:boolean" use="optional"/>
+                        <xs:attribute name="merchant-receipt-printed" type="xs:boolean" use="optional"/>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="non-approval">
+                      <xs:annotation>
+                        <xs:documentation>Decline, referral, failure or cancellation details. This element encapsulates the specific reason a transaction was not approved. The non-approval-reason-code and referral values are not standard and will vary between payment systems. These values are likely useful for logging and reconciliation purposes, and would not likely be exposed to the kiosk user or affect the business logic of the kiosk transaction.
+</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType mixed="true">
+                        <xs:sequence>
+                          <xs:element name="non-approval-reason-text" type="xs:string" minOccurs="0">
+                            <xs:annotation>
+                              <xs:documentation>Optional human-readable/display text describing the reason for non-approval.</xs:documentation>
+                            </xs:annotation>
+                          </xs:element>
+                          <xs:element ref="receipt-data" minOccurs="0" maxOccurs="unbounded"/>
+                        </xs:sequence>
+                        <xs:attribute name="non-approval-reason-code" type="xs:integer" use="optional"/>
+                        <xs:attribute name="referral" type="xs:boolean" use="optional"/>
+                      </xs:complexType>
+                    </xs:element>
+                    <xs:element name="transaction-status">
+                      <xs:annotation>
+                        <xs:documentation>Free-form status indication and/or display text.</xs:documentation>
+                      </xs:annotation>
+                      <xs:complexType>
+                        <xs:simpleContent>
+                          <xs:extension base="xs:string">
+                            <xs:attribute name="transaction-status-id" use="optional">
+                              <xs:simpleType>
                                 <xs:restriction base="xs:string">
-                                    <xs:enumeration value="pre-auth"/>
-                                    <xs:enumeration value="post-auth"/>
-                                    <xs:enumeration value="purchase"/>
-                                    <xs:enumeration value="refund"/>
-                                    <xs:enumeration value="void-purchase"/>
-                                    <xs:enumeration value="void-refund"/>
+                                  <xs:enumeration value="amount-approval"/>
+                                  <xs:enumeration value="application-selection"/>
+                                  <xs:enumeration value="card-insertion"/>
+                                  <xs:enumeration value="card-removal"/>
+                                  <xs:enumeration value="cashback-entry"/>
+                                  <xs:enumeration value="pin-entry"/>
+                                  <xs:enumeration value="processing"/>
                                 </xs:restriction>
-                            </xs:simpleType>
-                        </xs:attribute>
-                    </xs:complexType>
-                </xs:element>
-            </xs:choice>
-            <xs:attribute name="epayment-msg-id" type="xs:string" use="optional">
+                              </xs:simpleType>
+                            </xs:attribute>
+                          </xs:extension>
+                        </xs:simpleContent>
+                      </xs:complexType>
+                    </xs:element>
+                  </xs:choice>
+                  <xs:attribute name="response-type" use="required">
+                    <xs:simpleType>
+                      <xs:restriction base="xs:string">
+                        <xs:enumeration value="approval"/>
+                        <xs:enumeration value="cancellation"/>
+                        <xs:enumeration value="decline"/>
+                        <xs:enumeration value="failure"/>
+                        <xs:enumeration value="status"/>
+                      </xs:restriction>
+                    </xs:simpleType>
+                  </xs:attribute>
+                </xs:complexType>
+              </xs:element>
+              <xs:element name="transaction-ack">
                 <xs:annotation>
-                    <xs:documentation>Application-defined EPayment component message ID (message exchange context), echoed by the common-use platform in the corresponding response(s); the application may use this to match the response(s) to the original request</xs:documentation>
+                  <xs:documentation>Confirmation (or rejection) of approved funds consumption.</xs:documentation>
                 </xs:annotation>
+                <xs:complexType>
+                  <xs:attribute name="consumed" type="xs:boolean" use="required">
+                    <xs:annotation>
+                      <xs:documentation>If consumed, this is a positive acknowledge to commit the funds transfer. If not consumed, this is a request to reverse, back-out or otherwise cancel the transaction.</xs:documentation>
+                    </xs:annotation>
+                  </xs:attribute>
+                </xs:complexType>
+              </xs:element>
+            </xs:choice>
+            <xs:attribute name="transaction-document-type" type="transaction-document-type" use="required"/>
+            <xs:attribute name="transaction-document-return-type" type="transaction-document-type" use="optional">
+              <xs:annotation>
+                <xs:documentation>Advice to the recipient as to what type of follow-up transaction document is expected to be returned; for a response document, this attribute indicates whether the platform expects an acknowledgment document to be returned to commit (or discard) the transaction.</xs:documentation>
+              </xs:annotation>
             </xs:attribute>
-            <xs:attribute name="epayment-msg-type" use="required">
+            <xs:attribute name="transaction-type" use="required">
+              <xs:annotation>
+                <xs:documentation>Financial transaction type.</xs:documentation>
+              </xs:annotation>
+              <xs:simpleType>
+                <xs:restriction base="xs:string">
+                  <xs:enumeration value="cancel"/>
+                  <xs:enumeration value="pre-auth"/>
+                  <xs:enumeration value="post-auth"/>
+                  <xs:enumeration value="purchase"/>
+                  <xs:enumeration value="refund"/>
+                  <xs:enumeration value="void-purchase"/>
+                  <xs:enumeration value="void-refund"/>
+                </xs:restriction>
+              </xs:simpleType>
+            </xs:attribute>
+          </xs:complexType>
+        </xs:element>
+        <xs:element name="operation">
+          <xs:annotation>
+            <xs:documentation>Request that the component perform some function that is not a direct financial transaction, such as key management, start-of-day, end-of-day, cashier sign-on, system status check, etc.</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
+            <xs:choice>
+              <xs:element name="operation-request" type="xs:string" minOccurs="0">
                 <xs:annotation>
-                    <xs:documentation>The type of common use payment operation contained in the XML message</xs:documentation>
+                  <xs:documentation>Some requests may require additional qualifying data, but those that do not are not required to explicitly include this element.</xs:documentation>
                 </xs:annotation>
+              </xs:element>
+              <xs:element name="operation-response">
                 <xs:simpleType>
-                    <xs:restriction base="xs:string">
-                        <xs:enumeration value="setup"/>
-                        <xs:enumeration value="transaction"/>
-                    </xs:restriction>
+                  <xs:restriction base="xs:string">
+                    <xs:enumeration value="offline"/>
+                    <xs:enumeration value="online"/>
+                  </xs:restriction>
                 </xs:simpleType>
+              </xs:element>
+            </xs:choice>
+            <xs:attribute name="operation-document-type" type="operation-document-type" use="required"/>
+            <xs:attribute name="operation-document-return-type" type="operation-document-type" use="optional"/>
+            <xs:attribute name="operation-type" use="required">
+              <xs:simpleType>
+                <xs:restriction base="xs:string">
+                  <xs:enumeration value="system-health"/>
+                </xs:restriction>
+              </xs:simpleType>
             </xs:attribute>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="feature">
-        <xs:complexType>
-            <xs:simpleContent>
-                <xs:extension base="xs:boolean">
-                    <xs:attribute name="feature-name" use="required">
-                        <xs:simpleType>
-                            <xs:restriction base="xs:string">
-                                <xs:enumeration value="auto-commit"/>
-                                <xs:enumeration value="pre-authorization"/>
-                            </xs:restriction>
-                        </xs:simpleType>
-                    </xs:attribute>
-                    <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
-                </xs:extension>
-            </xs:simpleContent>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="feature-list">
+          </xs:complexType>
+        </xs:element>
+      </xs:choice>
+      <xs:attribute name="epayment-msg-id" type="xs:string" use="optional">
         <xs:annotation>
-            <xs:documentation>Supported or requested feature set</xs:documentation>
+          <xs:documentation>Application-defined EPayment component message ID (message exchange context), echoed by the common-use platform in the corresponding response(s); the application may use this to match the response(s) to the original request</xs:documentation>
         </xs:annotation>
-        <xs:complexType>
-            <xs:sequence>
-                <xs:element ref="feature" maxOccurs="unbounded"/>
-            </xs:sequence>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="gp-parameter-list">
+      </xs:attribute>
+      <xs:attribute name="epayment-msg-type" use="required">
         <xs:annotation>
-            <xs:documentation>General-purpose parameters</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
-            <xs:sequence>
-                <xs:element name="gp-parameter" minOccurs="0" maxOccurs="unbounded">
-                    <xs:complexType>
-                        <xs:simpleContent>
-                            <xs:extension base="xs:string">
-                                <xs:attribute name="gp-parameter-name" type="xs:string" use="required"/>
-                            </xs:extension>
-                        </xs:simpleContent>
-                    </xs:complexType>
-                </xs:element>
-            </xs:sequence>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="media-type">
-        <xs:annotation>
-            <xs:documentation>Media type identifier</xs:documentation>
+          <xs:documentation>The type of common use payment operation contained in the XML message.</xs:documentation>
         </xs:annotation>
         <xs:simpleType>
-            <xs:restriction base="xs:string">
-                <xs:enumeration value="icc"/>
-                <xs:enumeration value="mag-stripe"/>
-                <xs:enumeration value="nfc"/>
-                <xs:enumeration value="rfid"/>
-            </xs:restriction>
+          <xs:restriction base="xs:string">
+            <xs:enumeration value="operation"/>
+            <xs:enumeration value="setup"/>
+            <xs:enumeration value="transaction"/>
+          </xs:restriction>
         </xs:simpleType>
-    </xs:element>
-    <xs:element name="media-type-list">
-        <xs:annotation>
-            <xs:documentation>Component-configured or application-requested media type list</xs:documentation>
-        </xs:annotation>
-        <xs:complexType>
-            <xs:sequence>
-                <xs:element ref="media-type" maxOccurs="unbounded"/>
-            </xs:sequence>
-            <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
-        </xs:complexType>
-    </xs:element>
-    <xs:element name="merchant-id" type="xs:string">
-        <xs:annotation>
-            <xs:documentation>Airline/merchant identifier where operating in a multi-merchant environment</xs:documentation>
-        </xs:annotation>
-    </xs:element>
-    <xs:element name="transaction-reference" type="xs:string">
-        <xs:annotation>
-            <xs:documentation>Acquirer or issuer provided reference to use for subsequent post-auth or void request (unique transaction identifier, STAN)</xs:documentation>
-        </xs:annotation>
-    </xs:element>
-    <xs:attribute name="overridable" type="xs:boolean" default="false">
-        <xs:annotation>
-            <xs:documentation>Whether overridable or configurable during setup</xs:documentation>
-        </xs:annotation>
-    </xs:attribute>
+      </xs:attribute>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="feature">
+    <xs:annotation>
+      <xs:documentation>What modes of payment are supported by the payment terminal or requested by the application. The application requests a particular mode of payment in its setup() request parameters. The auto-commit feature indicates whether or not the application wishes to perform a manual commit at the end of a successful transaction. The pre-authorization feature indicates whether the pre-authorization/post-authorization payment model is supported.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:simpleContent>
+        <xs:extension base="xs:boolean">
+          <xs:attribute name="feature-name" use="required">
+            <xs:simpleType>
+              <xs:restriction base="xs:string">
+                <xs:enumeration value="auto-commit">
+                  <xs:annotation>
+                    <xs:documentation>Whether the component auto-commits transactions before returning an approval response. If false, the application must positively acknowledge the response in order to complete and commit the transaction. If true, no acknowledge is required or expected and any non-consumption of funds (including for a signature verification failure) must be processed using a follow-up void transaction.</xs:documentation>
+                  </xs:annotation>
+                </xs:enumeration>
+                <xs:enumeration value="pre-authorization">
+                  <xs:annotation>
+                    <xs:documentation>Whether the component supports separate pre-authorization (funds reservation) and post-authorization (commit) transactions.</xs:documentation>
+                  </xs:annotation>
+                </xs:enumeration>
+                <xs:enumeration value="receipt-printer">
+                  <xs:annotation>
+                    <xs:documentation>Whether the component can and does print payment receipts prior to the approval, decline or failure response being returned.</xs:documentation>
+                  </xs:annotation>
+                </xs:enumeration>
+                <xs:enumeration value="signature-capture">
+                  <xs:annotation>
+                    <xs:documentation>Whether the component includes the ability to capture electronic signature data.</xs:documentation>
+                  </xs:annotation>
+                </xs:enumeration>
+                <xs:enumeration value="signature-cvm-supported">
+                  <xs:annotation>
+                    <xs:documentation>Whether the component supports signature verification as a CVM and, therefore, whether an approval might be returned that requires a signature verification to be performed by the application.</xs:documentation>
+                  </xs:annotation>
+                </xs:enumeration>
+              </xs:restriction>
+            </xs:simpleType>
+          </xs:attribute>
+          <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false">
+            <xs:annotation>
+              <xs:documentation source="Whether this feature can be overridden by the application using a setup() request."/>
+            </xs:annotation>
+          </xs:attribute>
+        </xs:extension>
+      </xs:simpleContent>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="feature-list">
+    <xs:annotation>
+      <xs:documentation>Payment system supported, component-configured or application-requested feature set.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element ref="feature" maxOccurs="unbounded"/>
+      </xs:sequence>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="gp-parameter-list">
+    <xs:annotation>
+      <xs:documentation>General-purpose parameters.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element name="gp-parameter" minOccurs="0" maxOccurs="unbounded">
+          <xs:annotation>
+            <xs:documentation>Special or proprietary payment parameters that can be provided by the CUSS application when requesting the payment, and/or returned by the payment subsystem upon conclusion of the transaction. These are optional values. This container is included in the schema to allow certain legacy payment protocols to be migrated to use the new CUSS 1.3 payment interface. It also allows for flexibility for future payment industry requirements that may affect common use or airline payment.</xs:documentation>
+          </xs:annotation>
+          <xs:complexType>
+            <xs:simpleContent>
+              <xs:extension base="xs:string">
+                <xs:attribute name="gp-parameter-name" type="xs:string" use="required"/>
+              </xs:extension>
+            </xs:simpleContent>
+          </xs:complexType>
+        </xs:element>
+      </xs:sequence>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="media-type">
+    <xs:annotation>
+      <xs:documentation>A media type that the payment terminal is able to accept. The application can restrict these types via setup() if the overridable attribute is true.</xs:documentation>
+    </xs:annotation>
+    <xs:simpleType>
+      <xs:restriction base="xs:string">
+        <xs:enumeration value="icc"/>
+        <xs:enumeration value="mag-stripe"/>
+        <xs:enumeration value="nfc"/>
+        <xs:enumeration value="rfid"/>
+      </xs:restriction>
+    </xs:simpleType>
+  </xs:element>
+  <xs:element name="media-type-list">
+    <xs:annotation>
+      <xs:documentation>Payment system supported, component-configured or application-requested media type list.</xs:documentation>
+    </xs:annotation>
+    <xs:complexType>
+      <xs:sequence>
+        <xs:element ref="media-type" maxOccurs="unbounded"/>
+      </xs:sequence>
+      <xs:attribute name="overridable" type="xs:boolean" use="optional" default="false"/>
+    </xs:complexType>
+  </xs:element>
+  <xs:element name="merchant-id" type="xs:string">
+    <xs:annotation>
+      <xs:documentation>Airline/merchant identifier where operating in a multi-merchant environment. If not supplied, the component is expected or required to determine it. The merchant ID in the CUSS schema is not the same technical value as the merchant ID used by the Payment Service Provider. In CUSS, this optional value lets a CUSS application provide an indicator about which company or provider is to receive the funds for the transaction.
+
+- The CUSS application provider will need to indicate the list of valid merchant IDs that an application may request at time of payment.
+- The CUSS platform will likely do an internal mapping of application request values, to values suitable for the platform’s payment solution.
+- The CUSS platform will likely validate and filter the merchant-id in transaction requests from the CUSS application.
+- If no value is specified, the platform will use an appropriate value (as set up during initial deployment of payment capabilities) for the transaction based on the companyCode value of the CUSS application making the transaction request.
+- This field is most likely to be used within applications that process transactions for multiple entities, such as ground handling or generic airport applications.</xs:documentation>
+    </xs:annotation>
+  </xs:element>
+  <xs:element name="receipt-data" type="xs:string">
+    <xs:annotation>
+      <xs:documentation>Acquirer-provided pre-formatted receipt data. This element provides pre-formatted receipt data that is the application’s responsibility to print. The data format is in raw text including line feeds, and may be encoded as a CDATA element. 	It is an application business logic decision, and potentially a bank certification requirement, to properly format and print this data on a document for the customer. For an approval, key data elements used on the receipt are also provided separately under the approval response.</xs:documentation>
+    </xs:annotation>
+  </xs:element>
+  <xs:element name="transaction-reference" type="xs:string">
+    <xs:annotation>
+      <xs:documentation>Acquirer or issuer provided reference to use for subsequent post-authorization or void request (unique transaction identifier, STAN).</xs:documentation>
+    </xs:annotation>
+  </xs:element>
+  <xs:attribute name="overridable" type="xs:boolean" default="false">
+    <xs:annotation>
+      <xs:documentation>Whether overridable or configurable during setup</xs:documentation>
+    </xs:annotation>
+  </xs:attribute>
 </xs:schema>
-- 
2.41.0.windows.1

